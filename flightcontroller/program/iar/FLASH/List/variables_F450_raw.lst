###############################################################################
#
# IAR ANSI C/C++ Compiler V8.30.1.114/W32 for ARM         29/Jul/2018  16:18:01
# Copyright 1999-2018 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\app\variables_F450_raw.c
#    Command line =  
#        -f C:\Users\XSK199~1\AppData\Local\Temp\EWA7F2.tmp
#        (C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\app\variables_F450_raw.c
#        -D K60 -D USE_K60F15 -D ARM_MATH_CM4 -D __FPU_PRESENT=1 -D
#        __FPU_USED=1 -lCN
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\FLASH\List
#        -lB
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\FLASH\List
#        -o
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\FLASH\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 -e --fpu=VFPv4_sp --dlib_config
#        D:\iar\arm\inc\c\DLib_Config_Full.h -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\app\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\app\Sensor\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\CPU\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\common\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\LPLD\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\LPLD\HW\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\LPLD\DEV\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\LPLD\FUNC\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\uCOS-II\Ports\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\uCOS-II\Source\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\FatFs\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\FatFs\option\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\USB\common\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\USB\driver\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\USB\descriptor\
#        -I
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\..\lib\USB\class\
#        -On --c++ -I D:\iar\arm\CMSIS\Core\Include\ -I
#        D:\iar\arm\CMSIS\DSP\Include\ -D ARM_MATH_CM4 --text_out utf8
#        --utf8_text_in)
#    Locale       =  C
#    List file    =  
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\FLASH\List\variables_F450_raw.lst
#    Object file  =  
#        C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\iar\FLASH\Obj\variables_F450_raw.o
#
###############################################################################

C:\Users\xsk19940910\Desktop\flightController-1\flightController-1\program\app\variables_F450_raw.c
      1          #include "variables.h"
      2          
      3          #if THIS_PLANE == QAV250
      4          int t = 0, tTrans = 0;
      5          float temp_111;
      6          //AHRS_TypeDef AHRS, AHRS0;
      7          float dis_set_hight;
      8          
      9          float ControlOutput_ZChannel;
     10          
     11          void PID_Controller::reset()
     12          {
     13            this->I = 0;
     14          }
     15          
     16          /*****************************************************************************/
     17          /*****************************************************************************/
     18          PID_Controller 
     19          gyroX = 
     20          {
     21            .Kp0  = 5, //8
     22            .Ki0  = 1, //1.8//3
     23            .Kd0  = 150,
     24            .fuzzy = 0,
     25            .D_smoother = 0.2,
     26            .smoother = 0,
     27            .integralLimit = 200000,
     28            .outputLimit  = 500,
     29            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
     30            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
     31            .KpStrategy   = {  
     32                              {  90,   90,  90,  90,  90,  90,  90  },
     33                              {  90,   90,  90,  90,  90,  90,  90  },
     34                              {  90,   90,  90,  90,  90,  90,  90  },
     35                              {  90,   90,  90,  90,  90,  90,  90  },
     36                              {  90,   90,  90,  90,  90,  90,  90  },
     37                              {  90,   90,  90,  90,  99,  90,  90  },
     38                              {  90,   90,  90,  90,  90,  90,  90  }
     39                            },
     40          
     41            .KiStrategy   = {
     42                              {  90,   90,  90,  90,  90,  90,  90  },
     43                              {  90,   90,  90,  90,  90,  90,  90  },
     44                              {  90,   90,  90,  90,  90,  90,  90  },
     45                              {  90,   90,  90,  90,  90,  90,  90  },
     46                              {  90,   90,  90,  90,  90,  90,  90  },
     47                              {  90,   90,  90,  90,  99,  90,  90  },
     48                              {  90,   90,  90,  90,  90,  90,  90  }
     49                            },
     50          
     51            .KdStrategy   = {
     52                              {  90,   90,  90,  90,  90,  90,  90  },
     53                              {  90,   90,  90,  90,  90,  90,  90  },
     54                              {  90,   90,  90,  90,  90,  90,  90  },
     55                              {  90,   90,  90,  90,  90,  90,  90  },
     56                              {  90,   90,  90,  90,  90,  90,  90  },
     57                              {  90,   90,  90,  90,  99,  90,  90  },
     58                              {  90,   90,  90,  90,  90,  90,  90  }
     59                            }
     60          }, 
     61          
     62          
     63          gyroY = 
     64          {
     65            .Kp0  = 5,
     66            .Ki0  = 1,//2 //3
     67            .Kd0  = 150,
     68            .fuzzy = 0,
     69            .D_smoother = 0.2,
     70            .smoother = 0,
     71            .integralLimit = 200000,
     72            .outputLimit  = 500,
     73            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
     74            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
     75            .KpStrategy   = {  
     76                              {  90,   90,  90,  90,  90,  90,  90  },
     77                              {  90,   90,  90,  90,  90,  90,  90  },
     78                              {  90,   90,  90,  90,  90,  90,  90  },
     79                              {  90,   90,  90,  90,  90,  90,  90  },
     80                              {  90,   90,  90,  90,  90,  90,  90  },
     81                              {  90,   90,  90,  90,  99,  90,  90  },
     82                              {  90,   90,  90,  90,  90,  90,  90  }
     83                            },
     84          
     85            .KiStrategy   = {
     86                              {  90,   90,  90,  90,  90,  90,  90  },
     87                              {  90,   90,  90,  90,  90,  90,  90  },
     88                              {  90,   90,  90,  90,  90,  90,  90  },
     89                              {  90,   90,  90,  90,  90,  90,  90  },
     90                              {  90,   90,  90,  90,  90,  90,  90  },
     91                              {  90,   90,  90,  90,  99,  90,  90  },
     92                              {  90,   90,  90,  90,  90,  90,  90  }
     93                            },
     94          
     95            .KdStrategy   = {
     96                              {  90,   90,  90,  90,  90,  90,  90  },
     97                              {  90,   90,  90,  90,  90,  90,  90  },
     98                              {  90,   90,  90,  90,  90,  90,  90  },
     99                              {  90,   90,  90,  90,  90,  90,  90  },
    100                              {  90,   90,  90,  90,  90,  90,  90  },
    101                              {  90,   90,  90,  90,  99,  90,  90  },
    102                              {  90,   90,  90,  90,  90,  90,  90  }
    103                            }
    104          },
    105          
    106          
    107          gyroZ = 
    108          {
    109            .Kp0  = 800, //1800
    110            .Ki0  = 0,//50,
    111            .Kd0  = 150, 
    112            .fuzzy = 0,
    113            .D_smoother = 0.2,
    114            .smoother = 0,
    115            .integralLimit = 10000,
    116            .outputLimit  = 200,
    117            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    118            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    119            .KpStrategy   = {  
    120                              {  90,   90,  90,  90,  90,  90,  90  },
    121                              {  90,   90,  90,  90,  90,  90,  90  },
    122                              {  90,   90,  90,  90,  90,  90,  90  },
    123                              {  90,   90,  90,  90,  90,  90,  90  },
    124                              {  90,   90,  90,  90,  90,  90,  90  },
    125                              {  90,   90,  90,  90,  99,  90,  90  },
    126                              {  90,   90,  90,  90,  90,  90,  90  }
    127                            },
    128          
    129            .KiStrategy   = {
    130                              {  90,   90,  90,  90,  90,  90,  90  },
    131                              {  90,   90,  90,  90,  90,  90,  90  },
    132                              {  90,   90,  90,  90,  90,  90,  90  },
    133                              {  90,   90,  90,  90,  90,  90,  90  },
    134                              {  90,   90,  90,  90,  90,  90,  90  },
    135                              {  90,   90,  90,  90,  99,  90,  90  },
    136                              {  90,   90,  90,  90,  90,  90,  90  }
    137                            },
    138          
    139            .KdStrategy   = {
    140                              {  90,   90,  90,  90,  90,  90,  90  },
    141                              {  90,   90,  90,  90,  90,  90,  90  },
    142                              {  90,   90,  90,  90,  90,  90,  90  },
    143                              {  90,   90,  90,  90,  90,  90,  90  },
    144                              {  90,   90,  90,  90,  90,  90,  90  },
    145                              {  90,   90,  90,  90,  99,  90,  90  },
    146                              {  90,   90,  90,  90,  90,  90,  90  }
    147                            }
    148          },
    149          
    150          /*****************************************************************************/
    151          /*****************************************************************************/
    152          
    153          angleX = 
    154          {
    155            .Kp0  = 5000,//10000
    156            .Ki0  = 0,//100,
    157            .Kd0  = 1500,//2500
    158            .fuzzy = 0,
    159            .smoother = 0,
    160            .integralLimit = 4000,
    161            .outputLimit  = 1200,
    162            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    163            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    164            .KpStrategy   = {  
    165                              {  90,   90,  90,  90,  90,  90,  90  },
    166                              {  90,   90,  90,  90,  90,  90,  90  },
    167                              {  90,   90,  90,  90,  90,  90,  90  },
    168                              {  90,   90,  90,  90,  90,  90,  90  },
    169                              {  90,   90,  90,  90,  90,  90,  90  },
    170                              {  90,   90,  90,  90,  99,  90,  90  },
    171                              {  90,   90,  90,  90,  90,  90,  90  }
    172                            },
    173          
    174            .KiStrategy   = {
    175                              {  90,   90,  90,  90,  90,  90,  90  },
    176                              {  90,   90,  90,  90,  90,  90,  90  },
    177                              {  90,   90,  90,  90,  90,  90,  90  },
    178                              {  90,   90,  90,  90,  90,  90,  90  },
    179                              {  90,   90,  90,  90,  90,  90,  90  },
    180                              {  90,   90,  90,  90,  99,  90,  90  },
    181                              {  90,   90,  90,  90,  90,  90,  90  }
    182                            },
    183          
    184            .KdStrategy   = {
    185                              {  90,   90,  90,  90,  90,  90,  90  },
    186                              {  90,   90,  90,  90,  90,  90,  90  },
    187                              {  90,   90,  90,  90,  90,  90,  90  },
    188                              {  90,   90,  90,  90,  90,  90,  90  },
    189                              {  90,   90,  90,  90,  90,  90,  90  },
    190                              {  90,   90,  90,  90,  99,  90,  90  },
    191                              {  90,   90,  90,  90,  90,  90,  90  }
    192                            }
    193          },
    194          
    195          
    196          
    197          angleY = 
    198          {
    199            .Kp0  = 5000,
    200            .Ki0  = 0,// 100,
    201            .Kd0  = 1500,
    202            .fuzzy = 0,
    203            .smoother = 0,
    204            .integralLimit = 4000,
    205            .outputLimit  = 1200,
    206            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    207            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    208            .KpStrategy   = {
    209                              {  90,   90,  90,  90,  90,  90,  90  },
    210                              {  90,   90,  90,  90,  90,  90,  90  },
    211                              {  90,   90,  90,  90,  90,  90,  90  },
    212                              {  90,   90,  90,  90,  90,  90,  90  },
    213                              {  90,   90,  90,  90,  90,  90,  90  },
    214                              {  90,   90,  90,  90,  99,  90,  90  },
    215                              {  90,   90,  90,  90,  90,  90,  90  }
    216                            },
    217          
    218            .KiStrategy   = {
    219                              {  90,   90,  90,  90,  90,  90,  90  },
    220                              {  90,   90,  90,  90,  90,  90,  90  },
    221                              {  90,   90,  90,  90,  90,  90,  90  },
    222                              {  90,   90,  90,  90,  90,  90,  90  },
    223                              {  90,   90,  90,  90,  90,  90,  90  },
    224                              {  90,   90,  90,  90,  99,  90,  90  },
    225                              {  90,   90,  90,  90,  90,  90,  90  }
    226                            },
    227          
    228            .KdStrategy   = {
    229                              {  90,   90,  90,  90,  90,  90,  90  },
    230                              {  90,   90,  90,  90,  90,  90,  90  },
    231                              {  90,   90,  90,  90,  90,  90,  90  },
    232                              {  90,   90,  90,  90,  90,  90,  90  },
    233                              {  90,   90,  90,  90,  90,  90,  90  },
    234                              {  90,   90,  90,  90,  99,  90,  90  },
    235                              {  90,   90,  90,  90,  90,  90,  90  }
    236                            }
    237          },
    238          
    239          angleZ = 
    240          {
    241            .Kp0  = 800,//1800
    242            .Ki0  = 0,
    243            .Kd0  = 200,
    244            .fuzzy = 0,
    245            .smoother = 0,
    246            .integralLimit = 4000,
    247            .outputLimit  = 150,
    248            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    249            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    250            .KpStrategy   = {
    251                              {  90,   90,  90,  90,  90,  90,  90  },
    252                              {  90,   90,  90,  90,  90,  90,  90  },
    253                              {  90,   90,  90,  90,  90,  90,  90  },
    254                              {  90,   90,  90,  90,  90,  90,  90  },
    255                              {  90,   90,  90,  90,  90,  90,  90  },
    256                              {  90,   90,  90,  90,  99,  90,  90  },
    257                              {  90,   90,  90,  90,  90,  90,  90  }
    258                            },
    259          
    260            .KiStrategy   = {
    261                              {  90,   90,  90,  90,  90,  90,  90  },
    262                              {  90,   90,  90,  90,  90,  90,  90  },
    263                              {  90,   90,  90,  90,  90,  90,  90  },
    264                              {  90,   90,  90,  90,  90,  90,  90  },
    265                              {  90,   90,  90,  90,  90,  90,  90  },
    266                              {  90,   90,  90,  90,  99,  90,  90  },
    267                              {  90,   90,  90,  90,  90,  90,  90  }
    268                            },
    269          
    270            .KdStrategy   = {
    271                              {  90,   90,  90,  90,  90,  90,  90  },
    272                              {  90,   90,  90,  90,  90,  90,  90  },
    273                              {  90,   90,  90,  90,  90,  90,  90  },
    274                              {  90,   90,  90,  90,  90,  90,  90  },
    275                              {  90,   90,  90,  90,  90,  90,  90  },
    276                              {  90,   90,  90,  90,  99,  90,  90  },
    277                              {  90,   90,  90,  90,  90,  90,  90  }
    278                            }
    279          },
    280          
    281          /*****************************************************************************/
    282          /*****************************************************************************/
    283          positionX_vel = 
    284          {
    285            .Kp0  = 6000, //2000
    286            .Ki0  = 0,//100
    287            .Kd0  = 200, //200
    288            .fuzzy = 0,
    289            .D_smoother = 0.96,
    290            .smoother = 0,
    291            .integralLimit = 100,
    292            .outputLimit  = 6,
    293            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    294            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    295            .KpStrategy   = {
    296                              {  90,   90,  90,  90,  90,  90,  90  },
    297                              {  90,   90,  90,  90,  90,  90,  90  },
    298                              {  90,   90,  90,  90,  90,  90,  90  },
    299                              {  90,   90,  90,  90,  90,  90,  90  },
    300                              {  90,   90,  90,  90,  90,  90,  90  },
    301                              {  90,   90,  90,  90,  99,  90,  90  },
    302                              {  90,   90,  90,  90,  90,  90,  90  }
    303                            },
    304          
    305            .KiStrategy   = {
    306                              {  90,   90,  90,  90,  90,  90,  90  },
    307                              {  90,   90,  90,  90,  90,  90,  90  },
    308                              {  90,   90,  90,  90,  90,  90,  90  },
    309                              {  90,   90,  90,  90,  90,  90,  90  },
    310                              {  90,   90,  90,  90,  90,  90,  90  },
    311                              {  90,   90,  90,  90,  99,  90,  90  },
    312                              {  90,   90,  90,  90,  90,  90,  90  }
    313                            },
    314          
    315            .KdStrategy   = {
    316                              {  90,   90,  90,  90,  90,  90,  90  },
    317                              {  90,   90,  90,  90,  90,  90,  90  },
    318                              {  90,   90,  90,  90,  90,  90,  90  },
    319                              {  90,   90,  90,  90,  90,  90,  90  },
    320                              {  90,   90,  90,  90,  90,  90,  90  },
    321                              {  90,   90,  90,  90,  99,  90,  90  },
    322                              {  90,   90,  90,  90,  90,  90,  90  }
    323                            }
    324          },
    325          positionY_vel = 
    326          {
    327            .Kp0  = 6000, //2000
    328            .Ki0  = 0,//100
    329            .Kd0  = 150, //200
    330            .fuzzy = 0,
    331            .D_smoother = 0.96,
    332            .smoother = 0,
    333            .integralLimit = 100,
    334            .outputLimit  = 6,
    335            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    336            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    337            .KpStrategy   = {
    338                              {  90,   90,  90,  90,  90,  90,  90  },
    339                              {  90,   90,  90,  90,  90,  90,  90  },
    340                              {  90,   90,  90,  90,  90,  90,  90  },
    341                              {  90,   90,  90,  90,  90,  90,  90  },
    342                              {  90,   90,  90,  90,  90,  90,  90  },
    343                              {  90,   90,  90,  90,  99,  90,  90  },
    344                              {  90,   90,  90,  90,  90,  90,  90  }
    345                            },
    346          
    347            .KiStrategy   = {
    348                              {  90,   90,  90,  90,  90,  90,  90  },
    349                              {  90,   90,  90,  90,  90,  90,  90  },
    350                              {  90,   90,  90,  90,  90,  90,  90  },
    351                              {  90,   90,  90,  90,  90,  90,  90  },
    352                              {  90,   90,  90,  90,  90,  90,  90  },
    353                              {  90,   90,  90,  90,  99,  90,  90  },
    354                              {  90,   90,  90,  90,  90,  90,  90  }
    355                            },
    356          
    357            .KdStrategy   = {
    358                              {  90,   90,  90,  90,  90,  90,  90  },
    359                              {  90,   90,  90,  90,  90,  90,  90  },
    360                              {  90,   90,  90,  90,  90,  90,  90  },
    361                              {  90,   90,  90,  90,  90,  90,  90  },
    362                              {  90,   90,  90,  90,  90,  90,  90  },
    363                              {  90,   90,  90,  90,  99,  90,  90  },
    364                              {  90,   90,  90,  90,  90,  90,  90  }
    365                            }
    366          },
    367          
    368          positionZ_vel = 
    369          {
    370            .Kp0  = 40000, //40000 
    371            .Ki0  = 340,   //340
    372            .Kd0  = 10000,  //68000
    373            .fuzzy = 0,
    374            .D_smoother = 0.993,
    375            .smoother = 0,
    376            .integralLimit = 5000,
    377            .outputLimit  = 100,
    378            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    379            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    380            .KpStrategy   = {
    381                              {  90,   90,  90,  90,  90,  90,  90  },
    382                              {  90,   90,  90,  90,  90,  90,  90  },
    383                              {  90,   90,  90,  90,  90,  90,  90  },
    384                              {  90,   90,  90,  90,  90,  90,  90  },
    385                              {  90,   90,  90,  90,  90,  90,  90  },
    386                              {  90,   90,  90,  90,  99,  90,  90  },
    387                              {  90,   90,  90,  90,  90,  90,  90  }
    388                            },
    389          
    390            .KiStrategy   = {
    391                              {  90,   90,  90,  90,  90,  90,  90  },
    392                              {  90,   90,  90,  90,  90,  90,  90  },
    393                              {  90,   90,  90,  90,  90,  90,  90  },
    394                              {  90,   90,  90,  90,  90,  90,  90  },
    395                              {  90,   90,  90,  90,  90,  90,  90  },
    396                              {  90,   90,  90,  90,  99,  90,  90  },
    397                              {  90,   90,  90,  90,  90,  90,  90  }
    398                            },
    399          
    400            .KdStrategy   = {
    401                              {  90,   90,  90,  90,  90,  90,  90  },
    402                              {  90,   90,  90,  90,  90,  90,  90  },
    403                              {  90,   90,  90,  90,  90,  90,  90  },
    404                              {  90,   90,  90,  90,  90,  90,  90  },
    405                              {  90,   90,  90,  90,  90,  90,  90  },
    406                              {  90,   90,  90,  90,  99,  90,  90  },
    407                              {  90,   90,  90,  90,  90,  90,  90  }
    408                            }
    409          },
    410          
    411          /*****************************************************************************/
    412          /*****************************************************************************/
    413          
    414          positionX = 
    415          {
    416            .Kp0  = 100,
    417            .Ki0  = 0,
    418            .Kd0  = 0,
    419            .fuzzy = 0,
    420            .D_smoother = 0.99,
    421            .smoother = 0,
    422            .integralLimit = 100,
    423            .outputLimit  = 0.4,
    424            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    425            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    426            .KpStrategy   = {
    427                              {  90,   90,  90,  90,  90,  90,  90  },
    428                              {  90,   90,  90,  90,  90,  90,  90  },
    429                              {  90,   90,  90,  90,  90,  90,  90  },
    430                              {  90,   90,  90,  90,  90,  90,  90  },
    431                              {  90,   90,  90,  90,  90,  90,  90  },
    432                              {  90,   90,  90,  90,  99,  90,  90  },
    433                              {  90,   90,  90,  90,  90,  90,  90  }
    434                            },
    435          
    436            .KiStrategy   = {
    437                              {  90,   90,  90,  90,  90,  90,  90  },
    438                              {  90,   90,  90,  90,  90,  90,  90  },
    439                              {  90,   90,  90,  90,  90,  90,  90  },
    440                              {  90,   90,  90,  90,  90,  90,  90  },
    441                              {  90,   90,  90,  90,  90,  90,  90  },
    442                              {  90,   90,  90,  90,  99,  90,  90  },
    443                              {  90,   90,  90,  90,  90,  90,  90  }
    444                            },
    445          
    446            .KdStrategy   = {
    447                              {  90,   90,  90,  90,  90,  90,  90  },
    448                              {  90,   90,  90,  90,  90,  90,  90  },
    449                              {  90,   90,  90,  90,  90,  90,  90  },
    450                              {  90,   90,  90,  90,  90,  90,  90  },
    451                              {  90,   90,  90,  90,  90,  90,  90  },
    452                              {  90,   90,  90,  90,  99,  90,  90  },
    453                              {  90,   90,  90,  90,  90,  90,  90  }
    454                            }
    455          },
    456          positionY = 
    457          {
    458            .Kp0  = 100,
    459            .Ki0  = 0,
    460            .Kd0  = 0,
    461            .fuzzy = 0,
    462            .D_smoother = 0.99,
    463            .smoother = 0,
    464            .integralLimit = 100,
    465            .outputLimit  = 0.8,
    466            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    467            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    468            .KpStrategy   = {
    469                              {  90,   90,  90,  90,  90,  90,  90  },
    470                              {  90,   90,  90,  90,  90,  90,  90  },
    471                              {  90,   90,  90,  90,  90,  90,  90  },
    472                              {  90,   90,  90,  90,  90,  90,  90  },
    473                              {  90,   90,  90,  90,  90,  90,  90  },
    474                              {  90,   90,  90,  90,  99,  90,  90  },
    475                              {  90,   90,  90,  90,  90,  90,  90  }
    476                            },
    477          
    478            .KiStrategy   = {
    479                              {  90,   90,  90,  90,  90,  90,  90  },
    480                              {  90,   90,  90,  90,  90,  90,  90  },
    481                              {  90,   90,  90,  90,  90,  90,  90  },
    482                              {  90,   90,  90,  90,  90,  90,  90  },
    483                              {  90,   90,  90,  90,  90,  90,  90  },
    484                              {  90,   90,  90,  90,  99,  90,  90  },
    485                              {  90,   90,  90,  90,  90,  90,  90  }
    486                            },
    487          
    488            .KdStrategy   = {
    489                              {  90,   90,  90,  90,  90,  90,  90  },
    490                              {  90,   90,  90,  90,  90,  90,  90  },
    491                              {  90,   90,  90,  90,  90,  90,  90  },
    492                              {  90,   90,  90,  90,  90,  90,  90  },
    493                              {  90,   90,  90,  90,  90,  90,  90  },
    494                              {  90,   90,  90,  90,  99,  90,  90  },
    495                              {  90,   90,  90,  90,  90,  90,  90  }
    496                            }
    497          },
    498          positionZ = 
    499          {
    500            .Kp0  = 1000, //800
    501            .Ki0  = 0,
    502            .Kd0  = 700, //500
    503            .fuzzy = 0,
    504            .D_smoother = 0.96,
    505            .smoother = 0,
    506            .integralLimit = 1000,
    507            .outputLimit  = 0.5,
    508            .OffsetBound  = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    509            .OffsetDBound = {-420 , -300 , -180 , 0 , 180 , 300 , 420},
    510            .KpStrategy   = {
    511                              {  90,   90,  90,  90,  90,  90,  90  },
    512                              {  90,   90,  90,  90,  90,  90,  90  },
    513                              {  90,   90,  90,  90,  90,  90,  90  },
    514                              {  90,   90,  90,  90,  90,  90,  90  },
    515                              {  90,   90,  90,  90,  90,  90,  90  },
    516                              {  90,   90,  90,  90,  99,  90,  90  },
    517                              {  90,   90,  90,  90,  90,  90,  90  }
    518                            },
    519          
    520            .KiStrategy   = {
    521                              {  90,   90,  90,  90,  90,  90,  90  },
    522                              {  90,   90,  90,  90,  90,  90,  90  },
    523                              {  90,   90,  90,  90,  90,  90,  90  },
    524                              {  90,   90,  90,  90,  90,  90,  90  },
    525                              {  90,   90,  90,  90,  90,  90,  90  },
    526                              {  90,   90,  90,  90,  99,  90,  90  },
    527                              {  90,   90,  90,  90,  90,  90,  90  }
    528                            },
    529          
    530            .KdStrategy   = {
    531                              {  90,   90,  90,  90,  90,  90,  90  },
    532                              {  90,   90,  90,  90,  90,  90,  90  },
    533                              {  90,   90,  90,  90,  90,  90,  90  },
    534                              {  90,   90,  90,  90,  90,  90,  90  },
    535                              {  90,   90,  90,  90,  90,  90,  90  },
    536                              {  90,   90,  90,  90,  99,  90,  90  },
    537                              {  90,   90,  90,  90,  90,  90,  90  }
    538                            }
    539          }
    540          ;
    541          
    542          /*****************************************************************************/
    543          /*****************************************************************************/
    544          
    545          Rotor controlOutput;
    546          
    547          void findDifference::getresult(float data, float min, float max, int num)
    548          {
    549            this->min = max;
    550            this->max = min;
    551            
    552            for(int i=0; i<num; i++)
    553            {
    554              this->H[i] = this->H[i+1];
    555              
    556              if(this->H[i] < this->min) this->min = this->H[i];
    557              if(this->H[i] > this->max) this->max = this->H[i];
    558            }
    559            this->diff = this->max - this->min;
    560            this->H[num] = data;
    561          }
    562          
    563          findDifference Diffa;
    564          
    565          
    566          //float roll, pitch, yaw;
    567          float roll1, pitch1, yaw1, yaw2;
    568          float roll3, pitch3, yaw3, yaw4;
    569          
    570          int RXD_Iterator_6050 = 0;
    571          
    572          int powerVoltage_12, powerVoltage_5, powerVoltage_3v3;
    573          int updateErrorCnt = 0;
    574          
    575          int OffsetMembership_X[NUM]={0};
    576          int OffsetDMembership_X[NUM]={0};
    577          
    578          int OffsetMembership_Y[NUM]={0};
    579          int OffsetDMembership_Y[NUM]={0};
    580          
    581          
    582          int   rowTX_X = 0;
    583          int   columnTX_X = 0;
    584          int   Kp_X = 80,  Ki_X = 80,  Kd_X = 80;
    585          int   Kp_X0 = 20, Ki_X0 = 50, Kd_X0 = 5;
    586          
    587          
    588          int   rowTX_Y = 0;
    589          int   columnTX_Y = 0;
    590          int   Kp_Y = 80,  Ki_Y = 80,  Kd_Y = 80;
    591          int   Kp_Y0 = 20, Ki_Y0 = 50, Kd_Y0 = 5;
    592          
    593          
    594          int fanIniSpd = 4150;
    595          
    596          int roror1, roror2, roror3, roror4;
    597          #endif


 
 
 0 bytes of memory

Errors: none
Warnings: none
